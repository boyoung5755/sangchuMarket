package sangchu.mypage.dao;

import java.util.List;

import org.apache.ibatis.session.SqlSession;

import mybatis.config.MybatisUtil;
import sangchu.mypage.vo.JjimVO;
import sangchu.mypage.vo.RegTradeVO;

public class MypageDaoImpl implements IMypageDao {
	private static IMypageDao dao;
	private MypageDaoImpl() {}
	private SqlSession session;
	public static IMypageDao getInstance() {
		if(dao==null) dao = new MypageDaoImpl();
		return dao;
	}
	/*
		최초 작성자 : 김석호 
		최초 작성일 : 2023.08.10 13:37
		
			
		최근 수정자 : 김석호
		최근 수정일 : 2023.08.11 10:53
		
		마이 페이지에서 필요한 정보를 처리하기 위한 Dao객체입니다.
	*/
	
	
	
	
	@Override
	public List<JjimVO> getAllJjimList(String email) {
		List<JjimVO> list = null;
		session = MybatisUtil.getSqlSession();
		try {
			list = session.selectList("mypage.getAllJjimList", email);
		} catch (Exception e) {
			e.printStackTrace();
			System.out.println("getAllJjimList메소드에서 오류");
		}finally {
			if(session!=null) session.close();
		}
		return list;
	}




	@Override
	public String getOneImgSrc(String t_no) {
		String src = null;
		session = MybatisUtil.getSqlSession();
		try {
			src = session.selectOne("mypage.getOneImgSrc", t_no);
		} catch (Exception e) {
			e.printStackTrace();
			System.out.println("getOneImgSrc메소드에서 오류");
		}finally {
			if(session!=null) session.close();
		}
		return src;
	}


	@Override
	public List<RegTradeVO> getmyRegList(String email) {
		List<RegTradeVO> list = null;
		try {
			list = session.selectList("mypage.getmyRegList", email);
		} catch (Exception e) {
			e.printStackTrace();
			System.out.println("getmyRegList메소드에서 오류");
		}finally {
			if(session!=null) session.close();
		}
		return list;
	}

}
