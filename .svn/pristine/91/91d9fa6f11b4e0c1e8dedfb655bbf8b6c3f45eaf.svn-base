<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
    <title>Welcome!</title>
    
        
<script src="<%=request.getContextPath()%>/js/jquery/jquery-3.7.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>    
 <script>
    
   
$(function(){

// 			$.ajax({
<%-- 						url : "<%=request.getContextPath()%>/checkEmail.do", --%>
// 		 				type : "POST",
// 		 				data : {"email": email},
// 		 				success :function(data){
// 		 					if(data.sw == "가입불가능")	{//이메일이 존재할 때		
// 		 						$('#placehold-text').fadeIn();
// 		 						$('#placehold-text').text('※이미 존재하는 이메일입니다.');
// 		 						$('#placehold-text').css('color','red');
// 		 					}else{
// 		 						$('#placehold-text').fadeIn();
// 		 						$('#placehold-text').text('●가입 가능한 이메일입니다.');
// 		 						$('#placehold-text').css('color','green');
// 		 						}
// 		 					},
// 		 				error : function(xhr){
// 		 					alert(xhr.status);
// 		 				},
// 		 				dataType: 'json',
// 		 				contentType: "application/json; charset=UTF-8"
// 		 			})//ajax 끝
// 			}else{
// 	 						$('#placehold-text').fadeIn();
// 	 						$('#placehold-text').text('  ※올바른 이메일 형식을 입력해주세요.');
// 	 						$('#placehold-text').css('color','red');
// 			}
// 		})	




$('#str_email01').on('keyup', updateEmail);
$('#selectEmail').on('change', updateEmail);

function updateEmail(){
	var email01 = $('#str_email01').val().trim();
	var selectedDomain = $('#selectEmail option:selected').text(); //선택한 이메일 도메인 값을 selectedDomain에 저장
	
	if(selectedDomain =='직접입력'){ //직접입력을 선택했을 시
			$('#str_email02').val(""); //직접입력이라는 글씨를 지우고
			$('#str_email02').attr("disabled", false); //직접입력 칸 활성화
			
			
			$('#str_email02').on('input', function(){
				selectedDomain = $('#str_email02').val();
				printPlaceholder(email01, selectedDomain)
			});
			
	}else{ //직접입력 아닐경우(이메일을 선택하는 경우)
			$('#str_email02').val(selectedDomain); //선택한 값 입력
			$('#str_email02').attr("disabled", true);
			printPlaceholder(email01, selectedDomain)
	}
	
	
	
}

function updatePlaceholder(email01, selectedDomain){
	var email = email01 + '@' + selectedDomain;
    $('#placehold-text').text(email);
}

function printPlaceholder(email01, selectedDomain){
	
	if(email01=="" || selectedDomain=="이메일선택" || selectedDomain==""){
		 $('#placehold-text').text("올바른")
	}else{
		 $('#placehold-text').text("굳")
		 var email = email01 + '@' + selectedDomain;
		 var requestData = { email: email };
		 $.ajax({
						url : "<%=request.getContextPath()%>/checkEmail.do",
		 				type : "POST",
		 				data : JSON.stringify(requestData),
		 				success :function(data){
		 					if(data.sw == "가입불가능")	{//이메일이 존재할 때		
		 						$('#placehold-text').fadeIn();
		 						$('#placehold-text').text('※이미 존재하는 이메일입니다.');
		 						$('#placehold-text').css('color','red');
		 					}else{
		 						$('#placehold-text').fadeIn();
		 						$('#placehold-text').text('●가입 가능한 이메일입니다.');
		 						$('#placehold-text').css('color','green');
		 						}
		 					},
		 				error : function(xhr){
		 					alert(xhr.status);
		 				},
		 				dataType: 'json',
		 				contentType: "application/json; charset=UTF-8"
		 			})//ajax 끝
		 
		 
		 
	}
}


////비밀번호 일치 확인-------------------------
	$('#alert-success').hide();
	$('#alert-danger').hide();
	
	$('input').keyup(function(){
		
		var pw1 = $('#pw1').val();		
		var pw2 = $('#pw2').val();
		
		if(pw1!="" || pw2!=""){
			if(pw1==pw2){
				
				$('#alert-success').fadeIn();
				$('#alert-success').css('color', 'green');
				$('#alert-danger').hide();
				
			}else{
				$('#alert-danger').fadeIn();
				$('#alert-danger').css('color', 'red');;
				$('#alert-success').hide();
				
			}
		}
		
	})
////-------------------------여기까지비밀번호 일치 확인
	
		
// 	정규식??
	$('#pw1').keyup(function(){
		var regExp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$";
		var pw1 = $('#pw1').val();
		if(pw1.match(regExp)==null){//정규식과 맞지 않으면 null 반환
			var not = "  ※적절하지 않은 비밀번호";
			$('#alertPass1').fadeIn();
			$('#alertPass1').text(not);
			$('#alertPass1').css('color','red');
			
		}else{
			$('#alertPass1').text("");
		}
		
	})
	
	$('#pw2').keyup(function(){
		var regExp = "^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).{8,}$";
		var pw2 = $('#pw2').val();
		if(pw2.match(regExp)==null){//정규식과 맞지 않으면 null 반환
			var not = " ※적절하지 않은 비밀번호";
			$('#alertPass2').fadeIn();
			$('#alertPass2').text(not);
			$('#alertPass2').css('color','red');
		
		}else{
			$('#alertPass2').text("");
		}
		
	})
})
</script>
    
    
    
<style>
        /* Google web font CDN*/
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700&display=swap');
       
        @font-face {
            /*로고 폰트*/
            font-family: 'GeekbleMalang2WOFF';
            src: url('../../font/GeekbleMalang2WOFF.woff') format('woff');
        }


        * {
            box-sizing: border-box;
            /*전체에 박스사이징*/
            outline: none;
            /*focus 했을때 테두리 나오게 */
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        html, body{
            height: 100%;
            margin: 0 auto;
        }
        

        .logoSection {
            display: inline-flex;
            flex-direction: row;
            text-decoration: none;
            align-items: center;
            margin-right: 30px;
        }

        .font {
            font-family: 'GeekbleMalang2WOFF', sans-serif;
            color: #03cd5d;
            font-size: 60px;
            margin-left: 10px;
        }

        #wrap {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            letter-spacing: -.5px;
            margin: 0 auto;
            width: 460px;

        }

        #temp {
            margin: 0 auto;
        }

        .header {
            padding-bottom: 10px;
            box-sizing: border-box;
        }

        .header .header_inner {
            position: relative;
            margin: 0 auto;
            text-align: center;
            box-sizing: border-box;
        }

        .header img {
            width: 80px;
            height: 70px;
        }


        body {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            background-color: #f5f6f7;
            line-height: 1.5em;
            color: #222;
            margin: 0;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 푸터에 있는 이용약관 등등등 */
        a {
            text-decoration: none;
            color: #222;
        }

        /*member sign in*/
        .member {
            width: 550px;
            /* border: 1px solid #000; */
            margin: auto;
            /*중앙 정렬*/
            padding: 0 20px;
            margin-bottom: 20px;
        }


        .member .field {
            margin: 5px 0;
            /*상하로 좀 띄워주기*/
        }


        .member b {
            display: block;
            /*수직 정렬하기 */
            margin-bottom: 5px;
        }

        

        
        .field.email div,
        .field.nickname div {
            display: flex;
        }

        .field.email div > input:nth-child(1){
            flex : 0.6
        }
        
        .field.email div > div:nth-child(2) {
            flex: 0.1;
            justify-content: center;
            align-items: center;
            padding: 0;
            border-right: none;
            background-color: white;
        } 
        .field.email div > input:nth-child(3) {
            flex: 0.6;
            border-left: none;
            padding: 0;
               background-color: white;
        } 
        .field.email div > select:nth-child(4) {
            flex: 0.5;
        } 

        .field.email div > input:nth-child(5){
            flex : 0.3;

        } 
       

        
        .field.nickname div input:nth-child(1){
            flex: 3;
        }
        
       .field.nickname div input:nth-child(2) {
            flex: 1;
        }

        .smallText{
            font-size: 8px;
            color : grey;
            font-style: italic;
        }

        .member input, select, .anno {
            border: 1px solid #dadada;
            padding: 15px;
            width: 100%;
            margin-bottom: 5px;
        }

		.member input[type=submit]{
		margin-top: 20px;
		}
		
		
        .member input[type=button],
        .member input[type=submit] {
            background-color: #2db400;
            color: #fff;
            cursor: pointer;
        }

        
        .member-footer {
            text-align: center;
            font-size: 12px;
            margin-top: 20px;
        }

        .member-footer div a:hover {
            text-decoration: underline;
            color: #2db400
        }

        .member-footer div a:after {
            content: '|';
            font-size: 10px;
            color: #bbb;
            margin-right: 5px;
            margin-left: 7px;
            /*살짝 내려가 있기 때문에 위로 올려주기 위해 transform 사용하기*/
            display: inline-block;
            transform: translateY(-1px);

        }

        .member-footer div a:last-child:after {
            display: none;
        }
			
		.placehold-text{
		border : 1px solid red;}


    </style>

    
</head>

<body>
    <div class="container">
    <div class="member">
        <!-- 1. 헤더(로고) -->
        <header class="header" role="banner">
            <div class="header_inner">
                <a class=logoSection href="mainSangchu.html">
                    <img src="../../images/Logo.png" class=logoImg width="40" height="40" alt="상추마켓로고">
                    <p class="font">상추마켓</p>
                </a>
            </div>

        </header>

        <!-- 2. 필드 -->
        <div>
        <form method="post">
        <div class="field email">
        
            <!-- 이메일 중복검사 -->
            <b>이메일<small>(필수)</small><span id="placehold-text"></span></b>
           
            <div>
                <input type="text" id="str_email01" placeholder="이메일입력">
                <div class="anno">@</div>
                <input type="text" id="str_email02" disabled value="이메일선택">
                <select id="selectEmail">
                  <option value="" selected disabled hidden>이메일선택</option>
                    <option value="naver" >naver.com</option>
                    <option value="gmail" >gmail.com</option>
                    <option value="daum">daum.net</option>
                    <option value="nate">nate.com</option>
                    <option value="outlook">outlook.com</option>
                    <option value="hotmail">hotmail.com</option>
                    <option value="empas">empas.com</option>
                    <option value="freechal">freechal.com</option>
                    <option value="paran">paran.com</option>
                    <option value="1">직접입력</option>
<!--                     <option value="1" selected>직접입력</option> -->
                </select>
                <input type="button" id="checkEmail" value="중복검사">
            </div>
            
            </div>
        
        <div class="field">
            <b>이름<small>(필수)</small></b>
            <input type="text" placeholder="이름입력">
        </div>
        <div class="field">
            <b>비밀번호<small>(필수)<span id="alertPass1"></span></small></b>
            <input class="userpw" maxlength="15" type="password" id="pw1" placeholder="대문자, 소문자, 숫자 포함 8~15자리 입력">
        </div>
        <div class="field">
            <b>비밀번호 확인<small>(필수)<span id="alertPass2"></span></small></b>
            <input class="userpw-confirm" maxlength="15" type="password" id="pw2" placeholder="대문자, 소문자, 숫자 포함 8~15자리 입력">
        </div>
        
        <div class="alert alert-success" id="alert-success">● 비밀번호가 일치합니다.</div>
        <div class="alert alert-danger" id="alert-danger">※비밀번호가 일치하지 않습니다.</div>


        <!-- 3. 이메일 인증 버튼 -->
        <input type="submit" value="이메일 인증">
	</form>
	</div>
        <!-- 4. 푸터 -->
        <div class="member-footer">
            <div>
                <a href="#none">이용약관</a>
                <a href="#none">개인정보처리방침</a>
            </div>
            <span><a href="#none">Sangchu Corp.</a></span>
        </div>
    </div>
</div>
</body>



</html>