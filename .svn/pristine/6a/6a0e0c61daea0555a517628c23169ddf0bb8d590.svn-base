<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
 <script src="<%=request.getContextPath()%>/js/jquery/jquery-3.7.0.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>    
<head>
    <meta charset="UTF-8">
    <title>Welcome!</title>
    <style>
        /* Google web font CDN*/
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700&display=swap');
       
        @font-face {
            /*로고 폰트*/
            font-family: 'GeekbleMalang2WOFF';
            src: url('../../font/GeekbleMalang2WOFF.woff') format('woff');
        }


        * {
            box-sizing: border-box;
            /*전체에 박스사이징*/
            outline: none;
            /*focus 했을때 테두리 나오게 */
        }

        html{
            height: 100%;
        }
        .logoSection {
            display: inline-flex;
            flex-direction: row;
            text-decoration: none;
            align-items: center;
            margin-right: 30px;
        }

        .font {
            font-family: 'GeekbleMalang2WOFF', sans-serif;
            color: #03cd5d;
            font-size: 60px;
            margin-left: 10px;
        }

        #wrap {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            letter-spacing: -.5px;
            margin: 0 auto;
            width: 460px;

        }

        #temp {
            margin: 0 auto;
        }

        .header {
            padding-bottom: 10px;
            box-sizing: border-box;
        }

        .welcomeMessage{
            font-family: 'Noto Sans KR', sans-serif;
            color: grey;
            font-size: 17px;
            text-align: center;
        }

        .header .header_inner{
            position: relative;
            margin: 0 auto;
            text-align: center;
            box-sizing: border-box;
        }

        .header img {
            width: 80px;
            height: 70px;
        }


        body {
            font-family: 'Noto Sans KR', sans-serif;
            font-size: 14px;
            background-color: #f5f6f7;
            line-height: 1.5em;
            color: #222;
            margin: 0;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 푸터에 있는 이용약관 등등등 */
        a {
            text-decoration: none;
            color: #222;
        }

        /*member sign in*/
        .member {
            width: 460px;
            /* border: 1px solid #000; */
            margin: auto;
            /*중앙 정렬*/
            padding: 0 20px;
            margin-bottom: 20px;
        }


        .member .field {
            margin: 5px 0;
            /*상하로 좀 띄워주기*/
        }


        .member b {
            display: block;
            /*수직 정렬하기 */
            margin-bottom: 5px;
        }

        
        .field.nickname div {
            display: flex;
        }
        .field.nickname div input:nth-child(1) {
            flex: 3;
        }

        .field.nickname div input:nth-child(2) {
            flex: 1;
        }

        .smallText {
            font-size: 8px;
            color: grey;
            font-style: italic;
        }

        /*input 중 radio 는 width 가 100%면 안되니까 */
        .member input:not(input[type=radio]),
        select {
            border: 1px solid #dadada;
            padding: 15px;
            width: 100%;
            margin-bottom: 5px;
        }
     
        .field.marketing{
            margin: 20px 0px 20px 0px;
        }
        
        .member input[type=button],
        .member input[type=submit] {
            background-color: #2db400;
            color: #fff;
            cursor: pointer;
        }

        .field.birth div {
            /*field 이면서 birth*/
            display: flex;
            gap: 10px;
            /*간격 벌려줄때 공식처럼 사용핟나 */
        }

        /* 이게 최선이에요.. */
        .juminB {
            display: flex;
            flex-direction: row;
            border: 2px dottedd orange;
            flex-shrink: 1;
            flex: 1 1 0;
            align-items: center;
        }

        .member-footer {
            text-align: center;
            font-size: 12px;
            margin-top: 20px;
        }

        .member-footer div a:hover {
            text-decoration: underline;
            color: #2db400
        }

        .member-footer div a:after {
            content: '|';
            font-size: 10px;
            color: #bbb;
            margin-right: 5px;
            margin-left: 7px;
            /*살짝 내려가 있기 때문에 위로 올려주기 위해 transform 사용하기*/
            display: inline-block;
            transform: translateY(-1px);

        }

        .member-footer div a:last-child:after {
            display: none;
        }
    </style>
</head>

<body>
    <div>
        <div class="member">
        <form id="memberSubmit" method="post" action="<%=request.getContextPath()%>/signup2.do">
            <!-- 1. 로고 -->
            <header class="header" role="banner">
                <div class="header_inner">
                    <a class=logoSection href="mainSangchu.html">
                        <img src="../../images/Logo.png" class=logoImg width="40" height="40" alt="상추마켓로고">
                        <p class="font">상추마켓</p>
                    </a>
                </div>
                <div class="welcomeMessage">  <%=request.getAttribute("userEmail")%> 님 </div>

            </header>

            <div class="field nickname">
                <b>닉네임<small>(선택)</small></b><span id="placehold-text"></span>
                <div>
                    <input type="text" id="inputNickname" placeholder="마이페이지에서 변경 가능합니다">
                    <input type="button" id="checkNickname" value="중복검사">
                </div>
                <div class="smallText">*마이페이지에서 변경 가능합니다</div>
            </div>

            <div class="field">
                <b>휴대전화<small>(필수)</small></b>
                <input type="tel" placeholder="- 없이 입력해주세요" required onKeyup="this.value=this.value.replace(/[^0-9]/g,'')" maxlength='11'>
                <div class="smallText">*마이페이지에서 변경 가능합니다</div>
            </div>

            <!-- 숫자만 받도록 -->
            <div class="field birth">
                <b>주민등록번호<small>(필수)</small></b>
                <div>
                    <div class="inputGroup--personalNo">
                        <input type="text" maxlength="6" name="personal1" class="personalNo-1" placeholder="주민번호 앞 6자리" onKeyup="this.value=this.value.replace(/[^0-9]/g,'')">
                    </div>
                    <div class="juminB">
                        -
                        <input type="text" maxlength="1" placeholder="주민번호 뒷 1자리" onKeyup="this.value=this.value.replace(/[^0-9]/g,'')">
                        <label>●●●●●●</label>
                    </div>
                </div>

            </div>

            <div class="field">
                <b>관심카테고리<small>(선택)</small></b>
                <input type="tel" placeholder="클릭">
            </div>

            <div class="field">
                <b>대표이미지<small>(선택)</small></b>
                <input type="file">
            </div>
            

            <!-- 4. 필드(성별) -->
            <div class="field marketing">
                <b>마케팅 활용 동의</b>
                <div>
                    <label><input type="radio" name="marketing" checked>동의합니다</label>
                    <label><input type="radio" name="marketing">동의하지 않습니다</label>
                </div>
            </div>


            <!-- 6. 가입하기 버튼 -->
            <input type="submit" value="가입하기">

            <!-- 7. 푸터 -->
            <div class="member-footer">
                <div>
                    <a href="#none">이용약관</a>
                    <a href="#none">개인정보처리방침</a>
                </div>
                <span><a href="#none">NAVER Corp.</a></span>
            </div>
            </form>
         </div>
    </div>
</body>

<script>
	$(function(){
		
		$('#checkNickname').on('click', function(){
			var nickname = $('#inputNickname').val();
			
			$.ajax({
				url : "<%=request.getContextPath()%>/duplicateInspection.do",
				type : "get",
				data : {"nickname" : nickname},
				
				success : function(data){
					if(data.sw=="가입가능"){
						 $('#placehold-text').fadeIn();
						 $('#placehold-text').text('	●사용가능한 닉네임입니다.');
						 $('#placehold-text').css('color', 'green');
					}else{
						 $('#placehold-text').fadeIn();
						 $('#placehold-text').text('	※[닉네임중복]사용불가한 닉네임입니다');
						 $('#placehold-text').css('color', 'red')	
					}
				},
				error : function(xhr){
					alert('상태' + xhr.status);	 
				 },
				 dataType : 'json'
			})//ajax 끝
		
			
		}) //$('#checkNickname') 클릭시 이벤트 함수 끝
	}) //$(function() 끝
</script>

</html>